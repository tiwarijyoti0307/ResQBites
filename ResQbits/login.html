<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Login Page</title>
		<link
			rel="stylesheet"
			href="lg.css"
		/>
		<style>
			/* Body styles */
			body {
				margin: 0;
				padding: 0;
				font-family: Arial, sans-serif;
				display: flex;
				justify-content: center;
				align-items: center;
				height: 100vh;
				background-image: url("12.jpg");
				background-size: cover;
				background-position: center;
			}

			/* Background overlay */
			.background-overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background-color: rgba(255, 255, 255, 0.5);
			}

			/* Form container styles */
			.form-container {
				background-color: #000000;
				padding: 30px;
				border-radius: 10px;
				box-shadow: 0 0 20px rgba(111, 109, 109, 0.1);
				width: 300px;
				text-align: center;
				position: relative;
				z-index: 1;
			}

			/* Input field styles */
			.form-container input[type="text"],
			.form-container input[type="password"],
			.form-container button {
				width: 100%;
				margin-bottom: 20px;
				padding: 15px;
				border: none;
				border-radius: 5px;
				box-sizing: border-box;
				font-size: 16px;
				transition: background-color 0.3s, color 0.3s;
			}

			/* Submit button styles */
			.form-container button {
				background-color: #4caf50;
				color: #ffffff;
				cursor: pointer;
			}

			/* Hover effect for submit button */
			.form-container button:hover {
				background-color: #a06645;
			}

			/* Link styles */
			.form-container a {
				text-decoration: none;
				color: #0022ff;
				font-size: 14px;
				cursor: pointer;
			}

			/* Title styles */
			h2 {
				color: #fff7f7;
				margin-bottom: 20px;
				font-size: 24px;
			}

			/* Error message styles */
			.error-message {
				color: red;
				margin-top: -10px;
				margin-bottom: 20px;
			}

			/* Hide signup form by default */
			.signup-form {
				display: none;
			}
		</style>
	</head>
	<body>
		<div class="background-overlay"></div>
		<div
			class="form-container"
			id="loginForm"
		>
			<h2>Login</h2>
			<input
				id="loginUsername"
				type="text"
				placeholder="Username"
				required
			/>
			<input
				id="loginPassword"
				type="password"
				placeholder="Password"
				required
			/>
			<button
				type="submit"
				id="handleFormSubmit"
			>
				Login
			</button>
			<div
				class="error-message"
				id="loginErrorMessage"
			></div>
			<p style="color: white">
				Don't have an account?
				<a
					href="#"
					onclick="toggleForms()"
					>Sign up</a
				>
			</p>
		</div>

		<div
			class="form-container signup-form"
			id="signupForm"
		>
			<h2>Sign Up</h2>
			<input
				id="signupUsername"
				type="text"
				placeholder="Username"
				required
			/>
			<input
				id="signupPassword"
				type="password"
				placeholder="Password"
				required
			/>
			<button
				type="submit"
				onclick="validateSignupForm()"
			>
				Sign Up
			</button>
			<div
				class="error-message"
				id="signupErrorMessage"
			></div>
			<p style="color: white">
				Already have an account?
				<a
					href="#"
					onclick="toggleForms()"
					>Login</a
				>
			</p>
		</div>

		<script>
			import PocketBase from "pocketbase";
			document.addEventListener("DOMContentLoaded", function () {
				const pb = new PocketBase("http://127.0.0.1:8090");
				const loginBtn = document.getElementById("handleFormSubmit");
				loginBtn.addEventListener("click", async () => {
					const loginUsername =
						document.getElementById("loginUsername");
					const loginPassword =
						document.getElementById("loginPassword");
					console.log("Value extracted from DOM");
					try {
						const authData = await pb
							.collection("users")
							.authWithPassword(
								loginUsername.value,
								loginPassword.value
							);
						alert("Login successful!", authData);
						window.location.href = "next.html";
					} catch (error) {
						const loginErrorMessage =
							document.getElementById("loginErrorMessage");
						loginErrorMessage.textContent =
							"Login failed. Please try again.";
					}
				});
			});

			// Function to toggle between login and signup forms
			function toggleForms() {
				const loginForm = document.getElementById("loginForm");
				const signupForm = document.getElementById("signupForm");

				if (loginForm.style.display === "none") {
					loginForm.style.display = "block";
					signupForm.style.display = "none";
				} else {
					loginForm.style.display = "none";
					signupForm.style.display = "block";
				}
			}

			// Function to validate signup form
			function validateSignupForm() {
				alert("Signup successful!");
				return true;
			}
		</script>
	</body>
</html>
